# Chapter06 기본적인 리팩터링

-   또 다른 방법으로 여러 함수를 변환 함수로 묶기~, 단계 쪼개기

## 6.1 함수 추출하기 Extract Function

### 배경

-   함수 추출하기는 내가 가장 ~
-   하지만 내 눈에는 '목적과 구현을 분리'하는 방식이 가장 합리적인 기준으로 보인다.
-   내 경험상 함수 안에 들어갈 코드가 대여섯 줄을 넘어갈 때부터 ~ "오리지널 스몰토크"
-   함수가 짧으면 캐싱하기가 ~

### 절차

1. 함수를 새로 만들고 목적을 잘 드러내는 ~(무엇을)
    - 추출한 함수를 원래 함수 안에 중첩시킨다.~

## 6.2 함수 인라인하기 Inline Function

-   하지만 때로는 함수 본문이 이름만큼 명확한 경우도 있다. 또는 함수 본문 코드를 이름만큼 깔끔하게 리팩터링할 대도 있다.

## 6.3 변수 추출하기 Extract Variable

-   177 여기서 객체의 엄청난 장점을 볼 수 있다. ~

### 6.4 변수 인라인하기 Inline Variable

-   배경 : 변수 이름이 원래 표현식과 다를 바 없을 때 그 변수를 인라인하는 것이 좋다.

### 6.5 함수 선언 바꾸기 Change Function Declaration

-   배경 : 이름이 좋으면 함수의 구현 코드를 살펴볼 필요 없이 호출문만 보고도 무슨 일을 하는지 파악할 수 있다. ~ 그래서 나는 이름이 잘못된 함수를 발견하면 더 나은 이름이 떠오르는 즉시 바꾸라는 명령으로 받아들인다. 그래야 그 코드를 다시 볼 때 무슨 일을 하는지 '또' 고민하지 않게 된다.
-   180 좋은 이름을 떠올리는 데 효과적인 방법이 하나 있다. 바로 주석을 이용해 함수의 목적을 설명해보는 것이다. 그러다 보면 주석이 멋진 이름으로 바뀌어 되돌아올 때가 있다.
-   매개변수는 함수를 사용하는 문맥을 설정한다.
-   활용 범위가 넓어질 뿐만 아니라, 다른 모듈과의 결합coupling을 제거할 수도 있다.
-   185 나는 자바스크립트로 프로그래밍한다면, 호출문을 변경하기 전에 어서션을 추가10.6절하여 호출하는 곳에서 새로 추가한 매개변수를 실제로 사용하는지 확인한다.
-   186 새 함수의 이름을 나중에 기존 함수 이름으로 바꾸기 쉽도록 검색하기 좋은 이름을 붙여둔다.

### 6.6 변수 캡슐화하기 Encapsulate Variable

-   188 함수는 데이터보다 다루기가 수월하다.
-   반대로 데이터는 함수보다 다루기가 까다로운데
    -   유효범위가 넓어질수록 다루기 어려워진다. 전역 데이터가 골칫거리인 이유도 바로 여기에 있다.
-   그래서 접근할 수 있는 범위가 넓은 데이터를 옮길 때는 먼저 그 데이터로의 접근을 독점하는 함수를 만드는 식으로 캠슐화하는 것이 가장 좋은 방법일 때가 많다. 데이터 재구성이라는 어려운 작업을 함수 재구성이라는 더 단순한 작업으로 변환하는 것이다.
-   189 데이터 캡슐화는 다른 경우에도 도움을 준다. 데이터를 변경하고 사용하는 코드를 감사힐 수 있는 확실한 통로가 되어주기 때문에 데이터 변경 전 검증이나 변경 후 추가 로직을 쉽게 끼워 넣을 수 있다.
-   객체 지향에서 객체의 데이터를 항상 private으로 유지해야 한다고 ~

#### **값 캡슐화하기**

-   191 기본 캡슐화 기법은 데이터 항목을 참조하는 부분만 캡슐화한다.
-   192 나는 주로 게터가 데이터의 복제본을 반환하도록 수정하는 식으로 처리한다.
    -   특히 리스트에 이 기법을 많이 적용한다. 데이터의 복제본을 반환하면 클라이언트는 게터로 얻는 데이터를 변경할 수 있지만 원본에는 아무 영향을 주지 못한다.
-   단, 주의할 점이 있다. 공유 데이터(원본)를 변경하기를 원하는 클라이언트가 있을 수 있다. ~ 이를 위한 좋은 방법이 레코드 캡슐화하기다.
-   세터에서도 복제본을 만드는 편이 좋을 수도 있다.
    -   링크가 필요 없다면 데이터를 복제해 저장하여 나중에 원본이 변경돼서 발생하는 사고를 방지할 수 있다.
    -   복제가 성능에 주는 영향은 대체로 미미하다.
-   193 복제본 만들기와 클래스로 감싸는 방식은 레코드 구조에서 깊이가 1인 속성들까지만 효과가 있다.
-   분명한 시실은 데이터의 사용 범위가 넓을수록 적절히 캡슐화하는 게 좋다는 것이다.
